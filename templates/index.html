<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/css/index.css">
  <title>帳務總覽</title>
</head>

<body>
  <!--主要-->
  <div class="container">
    <div class="left-box">
      <div class="listtitle">雲記帳</div>
      <div>
        <a class="list" href="/addRrecord">
          <p>新增收入紀錄</p>
        </a>
        <a class="list" href="/addErecord">
          <p>新增支出紀錄</p>
        </a>
        <a class="list" href="/addcategory">
          <p>新增種類</p>
        </a>
        <a class="list" href="/delcategory">
          <p>刪除種類</p>
        </a>
        <p class="list">圖表分析</p>
      </div>
      <div style="margin-bottom:20px;">
        聯繫我們:0912-xxx-xxx
        Gmail:xxx@gmai.com
      </div>
    </div>
    <div class="right-text">
      <h1>帳務總覽</h1>
      <hr>
      <div class="incomeEP">
        收入：<span class="thousand-separator">{{ income }}</span> &nbsp;&nbsp;
        支出：<span class="thousand-separator">{{ outcome }} </span>&nbsp;&nbsp;
        淨額：<span class="thousand-separator">{{ net }}</span>
      </div>

      <h2>帳務紀錄</h2>
      <div class="table">
        <table>
          <caption>收入</caption>
          <th>日期</th>
          <th>描述</th>
          <th>種類</th>
          <th style="text-align: right;">金額</th>
          {% for record in recordR %}
          <tr>

            <td hidden="hidden">{{record.id}}</td>
            <td>{{ record.date }}</td>
            <td>{{ record.description }}</td>
            <td>{{ record.categoryR }}</td>
            <td class="thousand-separator" style="text-align: right;">{{ record.cash }}</td>
            <td class="no-border">
              <a href="{% url 'editRr' record.id %}"><img src="/static/img/edit.svg" alt="編輯"></a>
              <a href="{% url 'delRr' record.id %}"><img src="/static/img/cancel-svgrepo-com.svg" alt="刪除"></a>
            </td>
            <!--<td class="no-border"><a class="button-change" href="{% url 'editRr' record.id %}">編輯</a></td>-->
            <!--舊的編輯-->
            <!--<td class="no-border"><a class="button-link-del" href="{% url 'delRr' record.id %}" >刪除</a></td>-->
            <!--舊的刪除-->
            
          </tr>
          
          {% endfor %}
        </table>
        <table>
          <caption class="table-label">支出</caption>
          <th>日期</th>
          <th>描述</th>
          <th>種類</th>
          <th style="text-align: right;">金額</th>
          <th style="border: none;"></th>

          {% for record in recordE %}
          <tr>
            <td hidden="hidden">{{record.id}}</td>
            <td>{{ record.date }}</td>
            <td>{{ record.description }}</td>
            <td>{{ record.categoryE }}</td>
            <td class="thousand-separator" style="text-align: right;">{{ record.cash }}</td>
            <td class="no-border">
              <a href="{% url 'editRr' record.id %}"><img src="/static/img/edit.svg" alt="編輯"></a>
              <a href="{% url 'delRr' record.id %}"><img src="/static/img/cancel-svgrepo-com.svg" alt="刪除"></a>
            </td>
            <!--<td class="no-border"><a class="button-change" href="{% url 'editEr' record.id %}">編輯</a></td>-->
            <!--<td class="no-border"><a href="{% url 'delEr' record.id %}" class="button-link-del">刪除</a></td>-->
          </tr>

          {% endfor %}
        </table>
        <script>
          document.addEventListener('DOMContentLoaded', function () {
            var cells = document.querySelectorAll('.thousand-separator');
            cells.forEach(function (cell) {
              var number = parseFloat(cell.textContent.replace(/,/g, ''));
              cell.textContent = number.toLocaleString(); // 使用toLocaleString()添加千位分隔符
            });
          });
        </script>
      </div>
    </div>
  </div> <!-- containter-->
</body>

</html>