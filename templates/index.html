<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/css/index.css">
  <title>帳務總覽</title>
</head>

<body>
  <!--主要-->
  <div class="container">
    <div class="left-box">
      <div class="listtitle">雲記帳</div>
      <div class="list">
        <a href="/addcategory">
          <img src="/static/img/playlist_add_FILL0_wght400_GRAD0_opsz24.svg" alt="">
          <span>新增種類</span>
        </a>
        <a href="/delcategory">
          <img src="/static/img/playlist_remove_FILL0_wght400_GRAD0_opsz24.svg" alt="">
          <span>刪除種類</span>
        </a>
        <p class="list">圖表分析</p>
      </div>
      <div style="margin-bottom:20px; color:#4b0082">
        聯繫我們:0912-xxx-xxx
        Gmail:xxx@gmai.com
      </div>
    </div>
    <div class="right-text">
      <h1>帳務總覽</h1>
      <hr>
      <div class="incomeEP">
        收入：<span class="thousand-separator">{{ income }}</span> &nbsp;&nbsp;
        支出：<span class="thousand-separator">{{ outcome }} </span>&nbsp;&nbsp;
        淨額：<span class="thousand-separator">{{ net }}</span>
      </div>

      <h2>帳務紀錄</h2>
      <div class="table-all">
        <div>
          <table class="cinereousTable">
            <caption>收入</caption>
            <thead>
              <tr>
                <th>日期</th>
                <th>描述</th>
                <th>種類</th>
                <th style="text-align: right;">金額</th>
                <th></th>
              </tr>
            </thead>

            {% for record in recordR %}
            <tr>

              <td hidden="hidden">{{record.id}}</td>
              <td>{{ record.date }}</td>
              <td>{{ record.description }}</td>
              <td>{{ record.categoryR }}</td>
              <td class="thousand-separator" style="text-align: right;">{{ record.cash }}</td>
              <td>
                <a href="{% url 'editRr' record.id %}"><img src="/static/img/edit.svg" alt="編輯"></a>
                <a href="{% url 'delRr' record.id %}"><img src="/static/img/cancel-svgrepo-com.svg" alt="刪除"></a>
              </td>
              <!--<td class="no-border"><a class="button-change" href="{% url 'editRr' record.id %}">編輯</a></td>-->
              <!--舊的編輯-->
              <!--<td class="no-border"><a class="button-link-del" href="{% url 'delRr' record.id %}" >刪除</a></td>-->
              <!--舊的刪除-->

            </tr>
            {% endfor %}
          </table>
          <a style="color:black;text-decoration: none;" href="/addRrecord">
            <p>新增收入紀錄</p>
          </a>
        </div> <!-- 左邊的表格-->
        <div>
          <table class="cinereousTable">
            <caption>支出</caption>
            <thead>
              <th>日期</th>
              <th>描述</th>
              <th>種類</th>
              <th style="text-align: right;">金額</th>
              <th style="text-align: center;">控制</th>

              {% for record in recordE %}
              <tr>
            </thead>
            <td hidden="hidden">{{record.id}}</td>
            <td>{{ record.date }}</td>
            <td>{{ record.description }}</td>
            <td>{{ record.categoryE }}</td>
            <td class="thousand-separator" style="text-align: right;">{{ record.cash }}</td>
            <td>
              <a href="{% url 'editEr' record.id %}"><img src="/static/img/edit.svg" alt="編輯"></a>
              <a href="{% url 'delEr' record.id %}"><img src="/static/img/cancel-svgrepo-com.svg" alt="刪除"></a>
            </td>
            <!--<td class="no-border"><a class="button-change" href="{% url 'editEr' record.id %}">編輯</a></td>-->
            <!--<td class="no-border"><a href="{% url 'delEr' record.id %}" class="button-link-del">刪除</a></td>-->
            </tr>

            {% endfor %}
          </table>
          <a style="color:black;text-decoration: none;" href="/addErecord"> <!-- 新增 要加圖案-->
            <p>新增支出紀錄</p>
          </a>
        </div>
        <script>
          document.addEventListener('DOMContentLoaded', function () {
            var cells = document.querySelectorAll('.thousand-separator');
            cells.forEach(function (cell) {
              var number = parseFloat(cell.textContent.replace(/,/g, ''));
              cell.textContent = number.toLocaleString(); // 使用toLocaleString()添加千位分隔符
            });
          });
        </script>
      </div>
    </div>
  </div> <!-- containter-->
</body>

</html>